<!DOCTYPE>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
	<link rel="icon" href="/resources/img/favicon.png" type="image/png">
    <title>Client</title>

    <!-- Custom fonts for this template-->
    <link href="/resources/css/select2.min.css" rel="stylesheet" />
    <link href="/resources/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="/resources/css/sb-admin.css" rel="stylesheet">
    <link href="/resources/css/animate.css" rel="stylesheet">
    <style>
        .m-right {
            margin-right: 8%;
        }
        
        .custom-file-label {
            margin-left: 15px;
        }
        
        #content-wrapper{
        	position: relative;
        }
@keyframes rotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

.overlay {
  background: #ffffff;
  color: #666666;
  position: absolute;
  height: 100%;
  width: 100%;
  z-index: 5000;
  top: 0;
  left: 0;
  float: left;
  text-align: center;
  padding-top: 25%;
  opacity: .80;
  display: none;
}
.overlay-content{
    margin: 0 auto;
    height: 64px;
    width: 64px;
    animation: rotate 0.8s infinite linear;
    border: 5px solid firebrick;
    border-right-color: transparent;
    border-radius: 50%;
}
    </style>
</head>
<body id="page-top">

    <nav class="navbar navbar-expand navbar-dark bg-dark static-top">
        <a class="navbar-brand m-right" href="#">Bank Project</a>
        <button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#">
      <i class="fas fa-bars"></i>
    </button>
        <!-- Navbar -->
        <ul class="navbar-nav ml-md-auto ml-md-0">
            <li class="nav-item dropdown no-arrow">
                <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-user-circle fa-fw"></i>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                    <!-- <a class="dropdown-item" href="#">Settings</a> -->
                    <a class="dropdown-item user_id disabled" href="#"></a>
                    <a class="dropdown-item" href="#" data-toggle="modal" data-target="#changePasswordModal">Change Password</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">Logout</a>
                </div>
            </li>
        </ul>

    </nav>

    <div id="wrapper">
        <!-- Sidebar -->
        <ul class="sidebar navbar-nav">
<!--
            <li class="nav-item active">
                <a class="nav-link" href="clientUpload">
                    <i class="fas fa-fw fa-upload"></i>
                    <span>Upload</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="clientDetail">
                    <i class="fa fa-user"></i>
                    <span>Client</span></a>
            </li>
-->
        </ul>

        <div id="content-wrapper">
			<div class="overlay">
	    		<div class="overlay-content"></div>
	    	</div>
            <div class="container-fluid">

                <!-- DataTables Example -->
                <div class="card mb-3">
                    <div class="card-header">
                        <i class="fas fa-table"></i> Upload Details</div>
                    <div class="card-body">
                        <form id="formUpload" method="POST">
                            <div class="form-group row">
                                <label for="bankName" class="col-sm-2 col-form-label text-right font-weight-bold">Bank Name:</label>
                                <div class="col-sm-3">
                                    <!-- <input type="text" class="form-control" id="bankName" placeholder="Bank Name" required> -->
                                    <select class="form-control" id="bankName">
  										<option value='-99' selected="selected">Select Bank</option>
									</select>
                                </div>
                                <!--
                                <div class="row" style="text-align: center;">
									<div class="col-md-10 col-md-offset-1">
										<div class="input-group">
											<div class="ui-widget">
												<input type="text" class="form-control" id="searchBoxChckId" placeholder="Search by GK Id,Constitution Name,Pan Number">
											</div>

											<span class="input-group-btn">
												<button type="button" id="btnSearchChckId" class="btn btn-info">
													<i class="glyphicon glyphicon-search"></i>
												</button>
											</span>
										</div>
									</div> 
								</div>
								-->
                            </div>
                            <div class="form-group row">
                                <label for="accountType" class="col-sm-2 col-form-label text-right font-weight-bold">Account Type:</label>
                                <div class="col-sm-3">
                                    <select id="accountType" class="custom-select custom-select mb-3" required>
                                        <option value="-99" selected>Select Account Type</option>
                                        <option value="savings">Savings</option>
                                        <option value="current">Current</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <!-- <label for="uploadFile" class="col-sm-2 col-form-label text-right">Upload File:</label> -->
                                <div class="offset-md-2"></div>
                                <div class="col-sm-3">
                                    <input type="file" class="custom-file-input" id="customFile" accept="application/pdf" required />
                                    <label class="custom-file-label" for="customFile">File upload</label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-6">
                                    <button type="submit" class="btn btn-primary d-block mx-auto">Submit</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
            <!-- /.container-fluid -->

            <!-- Sticky Footer -->
            <!-- <footer class="sticky-footer">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright � Your Website 2019</span>
                    </div>
                </div>
            </footer> -->

        </div>
        <!-- /.content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">�</span>
          </button>
                </div>
                <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                    <a class="btn btn-primary" href="/">Logout</a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Change Password -->
    <div class="modal fade" id="changePasswordModal" tabindex="-1" role="dialog" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            	<form id='changePasswordForm' autocomplete="off">
                <div class="modal-header">
                    <h5 class="modal-title" id="changePasswordModalLabel">Change Password</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            			<span aria-hidden="true">�</span>
          			</button>
                </div>
                <div class="modal-body">
                	<div class="row">
                		<div class="col-md-12">
                			<div>
                				<fieldset>
                					<div class="form-group">
                						<input type="password" id="oldPassword" class="form-control" required="required" pattern="[A-Za-z0-9_$@./#&amp;+-]{4,20}" placeholder="Old Password" autofocus="">
                					</div>
               						<div class="form-group">
               							<input class="form-control" placeholder="New Password" name="newPassword" required="required" pattern="[A-Za-z0-9_$@./#&amp;+-]{4,20}" type="password" id="newPassword">
             						</div>
              						<div class="form-group">
              							<input class="form-control" placeholder="Re-enter New Password" required="required" pattern="[A-Za-z0-9_$@./#&amp;+-]{4,20}" name="reNewPassword" type="password" id="reNewPassword">
									</div>
              					</fieldset>
              				</div>
              			</div>
              		</div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                    <input type="submit" id="btnChangePassword" value="Change Password" class="btn btn-primary">
                </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap core JavaScript-->
    <script src="/resources/vendor/jquery/jquery.min.js"></script>
    <script src="/resources/js/select2.min.js"></script>
    <script src="/resources/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/resources/vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="/resources/js/sb-admin.min.js"></script>
    <script src="/resources/js/config.js"></script>
    <script src="/resources/js/bootstrap-notify.js"></script>
	<script>
	$(document).ready(function(){
		
		$('#bankName').select2({
			  placeholder: 'Select Bank'
		});
		$("#formUpload").submit(function(event){
			event.preventDefault();
			if ($("#accountType :selected").val()!="-99" && $("#bankName :selected").val()!="-99"){
				var fd = new FormData();
				fd.append('userid', localStorage.id);
				fd.append( 'file1',  $("#customFile")[0].files[0]);
				fd.append( 'bankname', $("#bankName").val());
				fd.append( 'acctype',  $("#accountType").val());
				$(".overlay").fadeIn();
				var postData = "/excel/uploadPdf";
	        	$.ajax({
	        		url: postData,
	        		data: fd,
	        		type: 'POST',
	        		processData: false,
					contentType: false,
	        		success: function(data){
	        			var response = JSON.parse(data);
	        			if (response.reply=="Success"){
	        				$("#bankName").val('-99').trigger('change');
	        				$("#formUpload")[0].reset();
	        				$(".overlay").fadeOut();
	        				getNotify('success','fa fa-check-circle','Data Uploaded Successfully with ID: <strong>'+response.id+'</strong>');
	        			} else {
	        				$(".overlay").fadeOut();
	        				getNotify('danger','fas fa-times-circle','Data Upload Failed.');
	        			}
	        		},
	        		error: function (request, status, error) {
	        			$(".overlay").fadeOut();
	        			getNotify('danger','fas fa-times-circle',request.responseText);
	        	    }
	        	})	
			} else {
				$(".overlay").fadeOut();
				var msgValidation
				if($("#bankName :selected").val()=="-99"){
					msgValidation="Please Select Bank";
				}else if ($("#accountType :selected").val()=="-99"){
					msgValidation="Please Select Account Type";
				} 
				getNotify('danger','fas fa-exclamation-triangle',msgValidation);
			}
		})

		$(".overlay").fadeIn();
		$.ajax({
			url: '/excel/getBankList',
    		type: 'GET',
    		success: function(data){
    			if (data.length>0){
    				var bankData = data.length;
    				data.forEach(function(text) {
    					var data = {
						   sel_value: text,
							sel_name: text
						};
						
    				    var newOption = new Option(data.sel_name, data.sel_value, false, false);
    				    $('#bankName').append(newOption)
    				});
    				$(".overlay").fadeOut();
    				$("#bankName").trigger('change');
    			} else {
    				$(".overlay").fadeOut();
    				getNotify('danger','fas fa-times-circle',"No Data Found");
    			}
    		},
    		error: function (request, status, error) {
    			$(".overlay").fadeOut();
    			getNotify('danger','fas fa-times-circle',request.responseText);
    	    }
		});
	});
	</script>
</body>

</html>